{"version":3,"sources":["../../lib/server/timer.ts"],"names":["nextID","TIMERS","Timer","constructor","id","clear","clearTimeout","start","timeout","callback","setTimeout","isRunning"],"mappings":";;;;;;;;;AAAA,IAAIA,MAAM,GAAG,CAAb;AAEA,MAAMC,MAAM,GAAG,EAAf;;AAEe,MAAMC,KAAN,CAAY;AAGzBC,EAAAA,WAAW,GAAG;AAAA;;AACZ,SAAKC,EAAL,GAAU,IAAV;AACD;;AAEDC,EAAAA,KAAK,GAAG;AACN,QAAI,KAAKD,EAAT,EAAa;AACXE,MAAAA,YAAY,CAACL,MAAM,CAAC,KAAKG,EAAN,CAAP,CAAZ;AACA,aAAOH,MAAM,CAAC,KAAKG,EAAN,CAAb;AACA,WAAKA,EAAL,GAAU,IAAV;AACD;AACF;;AAEDG,EAAAA,KAAK,CAACC,OAAD,EAAUC,QAAV,EAAoB;AACvB,SAAKJ,KAAL;AAEA,SAAKD,EAAL,GAAU,EAAEJ,MAAZ;AAEAC,IAAAA,MAAM,CAAC,KAAKG,EAAN,CAAN,GAAkBM,UAAU,CAAC,MAAM;AACjC,aAAOT,MAAM,CAAC,KAAKG,EAAN,CAAb;AACA,WAAKA,EAAL,GAAU,IAAV;AAEAK,MAAAA,QAAQ;AACT,KAL2B,EAKzBD,OAAO,IAAI,IAAX,GAAkB,GAAlB,GAAwBA,OALC,CAA5B;AAMD;;AAEDG,EAAAA,SAAS,GAAG;AACV,WAAO,KAAKP,EAAL,IAAW,IAAlB;AACD;;AA9BwB","sourcesContent":["let nextID = 0;\n\nconst TIMERS = {};\n\nexport default class Timer {\n  id: number;\n\n  constructor() {\n    this.id = null;\n  }\n\n  clear() {\n    if (this.id) {\n      clearTimeout(TIMERS[this.id]);\n      delete TIMERS[this.id];\n      this.id = null;\n    }\n  }\n\n  start(timeout, callback) {\n    this.clear();\n\n    this.id = ++nextID;\n\n    TIMERS[this.id] = setTimeout(() => {\n      delete TIMERS[this.id];\n      this.id = null;\n\n      callback();\n    }, timeout == null ? 1e8 : timeout);\n  }\n\n  isRunning() {\n    return this.id != null;\n  }\n}\n"],"file":"timer.js"}