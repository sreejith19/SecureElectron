{"version":3,"sources":["../../lib/client/runtime.ts"],"names":["global","_try","func","ex","setResult","error","name","message","stack","_execute","_result","eval","_code","dispatch","args","callback","parameters","JSON","stringify","wrappedCallback","apply","parse","push","json","_dispatch","result","Error","value","httpRequest","options","setTimeout","timeout","clearTimeout","id","info","console","log","define","defineAsync","pop"],"mappings":"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","sourcesContent":["global._try = (func) => {\n  try {\n    func();\n  } catch (ex) {\n    global.setResult({\n      error: {\n        name: ex.name,\n        message: ex.message,\n        stack: ex.stack\n      }\n    });\n  }\n};\n\nglobal._execute = () => {\n  global._try(() => {\n    global._result = null;\n    global._result = eval(global._code);\n  });\n};\n\nglobal.dispatch = (name, args, callback) => {\n  if (typeof callback !== 'function') {\n    callback = null;\n  }\n\n  const parameters = [ name, JSON.stringify({ name, args: args || [] }) ];\n\n  const wrappedCallback = callback && ((...args) => {\n    global._try(() => {\n      if (callback) {\n        callback.apply(null, JSON.parse(args));\n      }\n    });\n  });\n\n  parameters.push(wrappedCallback);\n\n  const json = global._dispatch.apply(global, parameters);\n\n  const result = json != null ? JSON.parse(json).result : null;\n\n  if (result && result.error) {\n    throw new Error(result.error.message);\n  }\n\n  return result != null ? result.value : null;\n};\n\nglobal.httpRequest = (options, callback) => {\n  return dispatch('httpRequest', [ options ], callback);\n};\n\nglobal.setResult = (result) => {\n  return dispatch('setResult', result != null ? [ result ] : null);\n};\n\nglobal.setTimeout = (callback, timeout) => {\n  return dispatch('setTimeout', [ timeout ], callback);\n};\n\nglobal.clearTimeout = (id) => {\n  return dispatch('clearTimeout', [ id ]);\n};\n\nglobal.info = (id) => {\n  return dispatch('info', []);\n};\n\nglobal.console = {\n  log: (...args) => {\n    return dispatch('log', [ args ]);\n  },\n  error: (...args) => {\n    return dispatch('error', [ args ]);\n  }\n};\n\nglobal.define = (name) => {\n  global[name] = (...args) => {\n    return dispatch(name, args);\n  };\n};\n\nglobal.defineAsync = (name) => {\n  global[name] = (...args) => {\n    const callback = args.pop();\n\n    return dispatch(name, args, callback);\n  };\n};\n"],"file":"runtime.js"}